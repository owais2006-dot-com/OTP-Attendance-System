# OTP-Attendance-System
 A complete OTP-based Attendance Management System built in Java with MySQL backend and role-based access for students, teachers, and admins.
OTP Attendance System
This is a Java Swing-based desktop application for managing student attendance using One-Time Passwords (OTPs), with features for Admin, Teacher, and Student roles. It includes comprehensive functionalities such as user management, course management, attendance tracking with geofencing, assignment and grade management, course materials, class scheduling, announcements, leave requests, and feedback systems.

WARNING: As per the current implementation, passwords are stored and compared in plain text. This is a severe security risk and is NOT recommended for production environments. For a production system, robust password hashing (e.g., using BCrypt) should be implemented.

Features
General
User Authentication: Secure login for Admin, Teacher, and Student roles.

Role-Based Access Control: Different functionalities accessible based on user role.

Database Integration: Uses MySQL for data storage.

Responsive UI: Built with Java Swing, designed for desktop use.

Custom Dialogs: Replaces standard JOptionPane alerts with custom, styled dialogs.

Admin Dashboard
Student Management: Add, update, delete, and view student details, including profile pictures and account status. Search and filter students.

Teacher Management: Add, update, delete, and view teacher accounts, including account status.

Course Management: Create, update, and delete courses, assign teachers, and configure geofencing parameters (expected latitude, longitude, and radius).

Attendance Reporting: Generate comprehensive attendance summaries filtered by date range, course, teacher, and attendance status. Export reports to CSV. Includes overall attendance statistics and a bar chart visualization.

Announcement Management: Send announcements to all users, specific roles (students, teachers, admins), specific courses, or specific students.

Enrollment Request Management: Review and act on student requests to enroll in courses (approve/reject).

Leave Request Management: Review and act on student leave requests (approve/reject).

System Settings: Configure automated attendance reminders (enable/disable, time) and default geofence radius.

User Account Management: View and toggle the active status of any user account (activate/deactivate).

Teacher Dashboard
My Profile: View and update personal profile information (name).

My Courses: View courses assigned to the teacher.

Mark Attendance: Mark student attendance for assigned courses using an OTP generated by the Admin. Includes real-time geofence status and last marked attendance time.

Attendance Report: Generate attendance reports for students in their assigned courses, with filters for date, course, and status. Export to CSV.

Manage Assignments: Create, update, and delete assignments for their courses.

Manage Grades: Add and update grades for students on assignments in their courses, with feedback.

Course Materials: Upload, delete, and view course materials (files or links) for their courses.

Class Schedule: Manage class schedules (day, start time, end time) for their courses.

View Announcements: View announcements sent to them or their courses, and mark them as read.

Leave Requests: Review and act on leave requests from students in their courses.

Student Dashboard
My Profile: View and update personal profile details including name, father's name, email, phone, address, interests, bio, and profile picture.

My Enrolled Courses: View courses the student is currently enrolled in.

Request Enrollment: Request enrollment in new courses.

Mark My Attendance: Mark their own attendance using an OTP provided by the teacher/admin. Includes real-time geofence status and last marked attendance time.

My Attendance Report: View personal attendance history, filtered by date range, course, and status. Includes overall attendance statistics and a bar chart.

View Assignments: View assignments for their enrolled courses.

View Grades: View grades and feedback for their assignments.

View Course Materials: Access and view course materials uploaded by teachers.

View Class Schedule: View class schedules for their enrolled courses.

Submit Leave Request: Submit leave requests for general leave or specific courses, and view the status of their requests.

View Announcements: View announcements sent to them, and mark them as read.

Submit Feedback: Provide feedback and ratings for their enrolled courses.

Technologies Used
Java Swing: For the graphical user interface.

MySQL: As the relational database.

JDBC: For Java-to-database connectivity.

Java 8+: Required for java.time API (LocalDate, LocalTime).

Preferences API: For persisting OTP and expiry time locally.

ScheduledExecutorService: For automated attendance reminders.

Setup Instructions
1. Database Setup
This application uses a MySQL database. You need to create a database named student_portal and run the following SQL commands to set up the necessary tables and columns.

NOTE: The SQL schema provided in OTPAttendanceSystem.java is crucial for the application to function correctly. Ensure all CREATE TABLE and ALTER TABLE statements are executed.

-- Connect to your MySQL server as root or a user with sufficient privileges
-- CREATE DATABASE student_portal;
-- USE student_portal;

-- 1. Create 'users' table
CREATE TABLE users (
    id INT AUTO_INCREMENT PRIMARY KEY,
    username VARCHAR(50) NOT NULL UNIQUE,
    password VARCHAR(100) NOT NULL, -- WARNING: Store hashed passwords in production!
    role ENUM('admin', 'teacher', 'student') NOT NULL,
    full_name VARCHAR(255) NOT NULL,
    last_login TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    is_active BOOLEAN DEFAULT TRUE
);

-- 2. Create 'students' table
CREATE TABLE students (
    id INT AUTO_INCREMENT PRIMARY KEY,
    user_id INT NOT NULL UNIQUE,
    name VARCHAR(255) NOT NULL,
    roll_no VARCHAR(50) NOT NULL UNIQUE,
    father_name VARCHAR(255) NOT NULL,
    email VARCHAR(255) NOT NULL,
    phone_number VARCHAR(20),
    address TEXT,
    interests TEXT,
    bio TEXT,
    profile_picture_path VARCHAR(255),
    FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE
);

-- 3. Create 'courses' table
CREATE TABLE courses (
    id INT AUTO_INCREMENT PRIMARY KEY,
    name VARCHAR(255) NOT NULL UNIQUE,
    teacher_user_id INT,
    expected_latitude DECIMAL(10, 8),
    expected_longitude DECIMAL(11, 8),
    geofence_radius_meters INT DEFAULT 100,
    FOREIGN KEY (teacher_user_id) REFERENCES users(id) ON DELETE SET NULL
);

-- 4. Create 'student_courses' table (enrollment)
CREATE TABLE student_courses (
    student_id INT NOT NULL,
    course_id INT NOT NULL,
    enrollment_date TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    last_marked_attendance_time TIMESTAMP,
    PRIMARY KEY (student_id, course_id),
    FOREIGN KEY (student_id) REFERENCES students(id) ON DELETE CASCADE,
    FOREIGN KEY (course_id) REFERENCES courses(id) ON DELETE CASCADE
);

-- 5. Create 'attendance' table
CREATE TABLE attendance (
    id INT AUTO_INCREMENT PRIMARY KEY,
    student_id INT NOT NULL,
    course_id INT NOT NULL,
    date DATE NOT NULL,
    status ENUM('Present', 'Absent', 'Leave') NOT NULL,
    marked_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    latitude DECIMAL(10, 8),
    longitude DECIMAL(11, 8),
    UNIQUE KEY (student_id, course_id, date), -- Ensure one entry per student per course per day
    FOREIGN KEY (student_id) REFERENCES students(id) ON DELETE CASCADE,
    FOREIGN KEY (course_id) REFERENCES courses(id) ON DELETE CASCADE
);

-- 6. Create 'course_enrollment_requests' table
CREATE TABLE course_enrollment_requests (
    id INT AUTO_INCREMENT PRIMARY KEY,
    student_id INT NOT NULL,
    course_id INT NOT NULL,
    request_date TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    status ENUM('pending', 'approved', 'rejected') DEFAULT 'pending',
    approved_by_user_id INT,
    approval_date TIMESTAMP,
    FOREIGN KEY (student_id) REFERENCES students(id) ON DELETE CASCADE,
    FOREIGN KEY (course_id) REFERENCES courses(id) ON DELETE CASCADE,
    FOREIGN KEY (approved_by_user_id) REFERENCES users(id) ON DELETE SET NULL
);

-- 7. Create 'system_settings' table
CREATE TABLE system_settings (
    setting_key VARCHAR(255) PRIMARY KEY,
    setting_value VARCHAR(255) NOT NULL
);

-- Insert default settings for automated reminders and geofence
INSERT INTO system_settings (setting_key, setting_value) VALUES ('enable_attendance_reminders', 'true');
INSERT INTO system_settings (setting_key, setting_value) VALUES ('attendance_reminder_time_hour', '9'); -- 9 AM
INSERT INTO system_settings (setting_key, setting_value) VALUES ('attendance_reminder_time_minute', '0'); -- 00 minutes
INSERT INTO system_settings (setting_key, setting_value) VALUES ('default_geofence_radius', '100'); -- Default geofence radius in meters

-- 8. Create 'announcements' table
CREATE TABLE announcements (
    id INT AUTO_INCREMENT PRIMARY KEY,
    sender_user_id INT NOT NULL, -- User who sent the announcement (Admin/Teacher)
    subject VARCHAR(255) NOT NULL,
    message TEXT NOT NULL,
    send_to_role ENUM('student', 'teacher', 'admin', 'all', 'specific_course', 'specific_students') NOT NULL,
    target_course_id INT, -- NULL if not specific to a course
    sent_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    FOREIGN KEY (sender_user_id) REFERENCES users(id) ON DELETE CASCADE,
    FOREIGN KEY (target_course_id) REFERENCES courses(id) ON DELETE SET NULL
);

-- 9. Create 'user_announcements' table (for tracking individual recipient status)
CREATE TABLE user_announcements (
    id INT AUTO_INCREMENT PRIMARY KEY,
    announcement_id INT NOT NULL,
    recipient_user_id INT NOT NULL,
    is_read BOOLEAN DEFAULT FALSE,
    received_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    UNIQUE KEY (announcement_id, recipient_user_id), -- Ensure a user only gets one entry per announcement
    FOREIGN KEY (announcement_id) REFERENCES announcements(id) ON DELETE CASCADE,
    FOREIGN KEY (recipient_user_id) REFERENCES users(id) ON DELETE CASCADE
);

-- 10. Create 'leave_requests' table
CREATE TABLE leave_requests (
    id INT AUTO_INCREMENT PRIMARY KEY,
    student_id INT NOT NULL,
    course_id INT, -- Optional: if leave is course-specific, otherwise NULL for general leave
    request_date DATE NOT NULL,
    start_date DATE NOT NULL,
    end_date DATE NOT NULL,
    reason TEXT NOT NULL,
    status ENUM('pending', 'approved', 'rejected') DEFAULT 'pending',
    approved_by_user_id INT, -- Admin or Teacher who approved/rejected
    approval_date TIMESTAMP,
    FOREIGN KEY (student_id) REFERENCES students(id) ON DELETE CASCADE,
    FOREIGN KEY (course_id) REFERENCES courses(id) ON DELETE SET NULL,
    FOREIGN KEY (approved_by_user_id) REFERENCES users(id) ON DELETE SET NULL
);

-- 11. Create 'assignments' table
CREATE TABLE assignments (
    id INT AUTO_INCREMENT PRIMARY KEY,
    course_id INT NOT NULL,
    title VARCHAR(255) NOT NULL,
    description TEXT,
    due_date DATE,
    FOREIGN KEY (course_id) REFERENCES courses(id) ON DELETE CASCADE
);

-- 12. Create 'grades' table
CREATE TABLE grades (
    id INT AUTO_INCREMENT PRIMARY KEY,
    assignment_id INT NOT NULL,
    student_id INT NOT NULL,
    grade DECIMAL(5,2), -- e.g., 95.50
    feedback TEXT,
    graded_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    FOREIGN KEY (assignment_id) REFERENCES assignments(id) ON DELETE CASCADE,
    FOREIGN KEY (student_id) REFERENCES students(id) ON DELETE CASCADE,
    UNIQUE KEY (assignment_id, student_id) -- One grade per student per assignment
);

-- 13. Create 'course_materials' table
CREATE TABLE course_materials (
    id INT AUTO_INCREMENT PRIMARY KEY,
    course_id INT NOT NULL,
    title VARCHAR(255) NOT NULL,
    file_path VARCHAR(255), -- Path to the uploaded file or link
    upload_date TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    FOREIGN KEY (course_id) REFERENCES courses(id) ON DELETE CASCADE
);

-- 14. Create 'class_schedules' table
CREATE TABLE class_schedules (
    id INT AUTO_INCREMENT PRIMARY KEY,
    course_id INT NOT NULL,
    day_of_week VARCHAR(10) NOT NULL, -- e.g., 'MONDAY', 'TUESDAY
    start_time TIME NOT NULL,
    end_time TIME NOT NULL,
    FOREIGN KEY (course_id) REFERENCES courses(id) ON DELETE CASCADE
);

-- 15. Create 'feedback' table
CREATE TABLE feedback (
    id INT AUTO_INCREMENT PRIMARY KEY,
    student_id INT NOT NULL,
    course_id INT NOT NULL,
    rating INT NOT NULL CHECK (rating >= 1 AND rating <= 5),
    comments TEXT,
    submitted_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    FOREIGN KEY (student_id) REFERENCES students(id) ON DELETE CASCADE,
    FOREIGN KEY (course_id) REFERENCES courses(id) ON DELETE CASCADE,
    UNIQUE KEY (student_id, course_id) -- One feedback per student per course
);

-- Add initial data (example users)
INSERT INTO users (username, password, role, full_name) VALUES
('admin', 'admin123', 'admin', 'Admin User'),
('teacher1', 'teacher123', 'teacher', 'Ms. Alice Smith'),
('student1', 'student123', 'student', 'John Doe');

-- Add initial student data (linking to user)
INSERT INTO students (user_id, name, roll_no, father_name, email) VALUES
((SELECT id FROM users WHERE username = 'student1'), 'John Doe', 'S001', 'Richard Doe', 'john.doe@example.com');


2. Java Environment Setup
JDK: Ensure you have Java Development Kit (JDK) 8 or higher installed.

MySQL JDBC Driver: Download the MySQL Connector/J (JDBC driver). You can typically find it on the MySQL website.

Project Setup:

Create a new Java project in your IDE (e.g., IntelliJ IDEA, Eclipse, NetBeans).

Add the downloaded MySQL Connector/J .jar file to your project's classpath (e.g., in IntelliJ, go to Project Structure -> Libraries -> Add New Project Library -> Java).

Update Database Credentials:

Open OTPAttendanceSystem.java.

Modify the DB_URL, DB_USER, and DB_PASS constants to match your MySQL database configuration:

static final String DB_URL = "jdbc:mysql://localhost:3306/student_portal?useSSL=false&allowPublicKeyRetrieval=true";
static final String DB_USER = "your_mysql_username"; // e.g., "root"
static final String DB_PASS = "your_mysql_password"; // e.g., "Owais@12345"

Create Directories: The application expects student_images and course_materials_files directories in the same location as your compiled .class files or project root. These will be created automatically if they don't exist, but you can create them manually beforehand if preferred.

3. Running the Application
Compile and run the OTPAttendanceSystem.java file from your IDE.

The login screen will appear. You can use the default credentials:

Admin: Username admin, Password admin123

Teacher: Username teacher1, Password teacher123

Student: Username student1, Password student123

Usage
Login: Enter your username and password to access the respective dashboard.

Navigation: Use the sidebar to navigate between different functionalities.

Data Entry: Use the forms to add or update records.

Table Interaction: Click on rows in tables to populate the forms for editing or viewing details.

Search and Filter: Utilize search fields and combo boxes to filter data in tables.

OTP Generation: Admin generates OTPs which teachers/students use to mark attendance.

Geofencing: Attendance marking considers a simulated geographical location.

Automated Reminders: The system can send daily attendance reminders based on configured time. (Note: For this to work reliably in a production setting, the application would need to be running continuously or scheduled as a service).

Project Structure
OTPAttendanceSystem.java: Main application class, contains main method, login logic, database connection, and nested classes for UI utilities, User model, and Dashboard panels.

UIUtils (nested class): Provides consistent styling for Swing components.

User (nested class): Simple model for logged-in user data.

AdminDashboard (nested class): Implements the UI and logic for administrative tasks.

TeacherDashboard (nested class): Implements the UI and logic for teacher-specific tasks.

StudentDashboard (nested class): Implements the UI and logic for student-specific tasks.

BarChartPanel (nested class): Custom Swing component for visualizing attendance data.

Future Enhancements
Password Hashing: Implement strong password hashing (e.g., BCrypt) for secure password storage.

Enhanced Security: Implement more robust authentication and authorization mechanisms.

Real-time Location Services: Integrate with actual GPS/location APIs for accurate geofencing in a non-simulated environment.

Notifications: Implement in-app notifications or external (email/SMS) notifications for announcements and reminders.

Reporting Tools: More advanced reporting and analytics features.

Internationalization: Full support for multiple languages using ResourceBundle.

User Interface Improvements: Further refine the Swing UI for a more modern look and feel.

Error Logging: Implement a dedicated logging framework (e.g., Log4j, SLF4j) for better error tracking.

Deployment: Package the application as a runnable JAR or native executable for easier distribution.

Concurrency: Improve handling of long-running database operations to prevent UI freezing.

Contributing
Feel free to fork this repository, submit issues, and propose pull requests.

License
This project is open-source and available under the MIT License.
